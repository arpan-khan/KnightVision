<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KnightVision</title>
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="layout">
        <div class="left-col">
            <h1 class="brand-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
                    stroke="var(--accent)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M12 21h-6.5a2.5 2.5 0 0 1 -2.5 -2.5v-1a2.5 2.5 0 0 1 2.5 -2.5h1.5l1 -3.496a7.514 7.514 0 0 1 2 -8.504l1.3 -1.3l.7 .7a4 4 0 0 0 4 3l3 .5c0 3.5 -2 5 -2 5l-1.3 6h-6.7z" />
                    <path d="M12 18v3" />
                    <path d="M8.5 14h6.5" />
                    <circle cx="15.5" cy="8.5" r="1.5" fill="var(--accent)" />
                </svg>
                KnightVision
            </h1>
            <div class="board-wrapper">
                <div id="board" style="width: 100%; height: 100%;"></div>
                <svg id="arrow-svg" viewBox="0 0 100 100"
                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10;">
                    <defs>
                        <marker id="arrowhead-red" markerWidth="4" markerHeight="4" refX="3" refY="2" orient="auto">
                            <polygon points="0 0, 4 2, 0 4" fill="rgba(239, 68, 68, 0.9)" />
                        </marker>
                        <marker id="arrowhead-green" markerWidth="4" markerHeight="4" refX="3" refY="2" orient="auto">
                            <polygon points="0 0, 4 2, 0 4" fill="rgba(34, 197, 94, 0.9)" />
                        </marker>
                    </defs>
                </svg>
            </div>
            <div class="controls">
                <button id="btn-prev"> Prev</button>
                <button id="btn-run" class="primary">Run Lesson</button>
                <button id="btn-next">Next </button>
            </div>
            <div class="explanation-panel" id="explanation-panel">
                <h3><span id="exp-title">Checkpoint</span> <span class="badge" id="exp-badge">Mistake</span></h3>
                <div class="eval" id="exp-eval"></div>
                <p id="exp-text"></p>
            </div>
        </div>
        <div class="right-col">
            <div class="json-area-wrapper">
                <label>
                    <span>Lesson Script (JSON)</span>
                    <button id="btn-copy-prompt" class="small-utility-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Copy AI Prompt
                    </button>
                </label>
                <textarea id="json-input" spellcheck="false"></textarea>
            </div>
            <div class="load-btn-wrapper">
                <button id="btn-load" class="primary">Load Lesson</button>
            </div>

            <div class="how-to-card">
                <h4>How to Create a Lesson</h4>
                <ol>
                    <li>Go to <a href="https://lichess.org/" target="_blank" style="color: var(--accent); font-weight: 500;">lichess.org</a> &gt; Play against a computer.</li>
                    <li>After a match click <strong>Analysis board</strong> &gt; <strong>Share &amp; export</strong> &gt; Copy or download the PGN.</li>
                    <li>Click <strong>Copy AI Prompt</strong> above to get the instructional template.</li>
                    <li>Paste both the Prompt and your PGN into an AI Chatbot (like ChatGPT or Claude).</li>
                    <li>Paste the AI's generated JSON output into the text box above and click <strong>Load
                            Lesson</strong>.</li>
                </ol>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <script src="main.js"></script>
</body>

</html>